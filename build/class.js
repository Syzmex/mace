var M=require("./core");M.Disposable=function(){M.Disposable.MONITORING_MODE!=M.Disposable.MonitoringMode.OFF&&(M.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=(new Error).stack),M.Disposable.instances_[M.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},M.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},M.Disposable.MONITORING_MODE=0,M.Disposable.INCLUDE_STACK_ON_CREATION=!0,M.Disposable.instances_={},M.Disposable.getUndisposedObjects=function(){var s=[];for(var o in M.Disposable.instances_)M.Disposable.instances_.hasOwnProperty(o)&&s.push(M.Disposable.instances_[Number(o)]);return s},M.Disposable.clearUndisposedObjects=function(){M.Disposable.instances_={}},M.Disposable.prototype.disposed_=!1,M.Disposable.prototype.onDisposeCallbacks_,M.Disposable.prototype.creationStack,M.Disposable.prototype.isDisposed=function(){return this.disposed_},M.Disposable.prototype.getDisposed=M.Disposable.prototype.isDisposed,M.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),M.Disposable.MONITORING_MODE!=M.Disposable.MonitoringMode.OFF)){var s=M.getUid(this);if(M.Disposable.MONITORING_MODE==M.Disposable.MonitoringMode.PERMANENT&&!M.Disposable.instances_.hasOwnProperty(s))throw Error(this+" did not call the M.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete M.Disposable.instances_[s]}},M.Disposable.prototype.registerDisposable=function(s){this.addOnDisposeCallback(M.partial(M.dispose,s))},M.Disposable.prototype.addOnDisposeCallback=function(s,o){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(M.isDef(o)?M.bind(s,o):s)},M.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},M.Disposable.isDisposed=function(s){return s&&"function"==typeof s.isDisposed?s.isDisposed():!1},M.dispose=function(s){s&&"function"==typeof s.dispose&&s.dispose()},M.disposeAll=function(){for(var s=0,o=arguments.length;o>s;++s){var i=arguments[s];M.isArrayLike(i)?M.disposeAll.apply(null,i):M.dispose(i)}},module.exports=M;