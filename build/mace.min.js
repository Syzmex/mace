"use strict";(function(){var e=this,t={};t.version="0.0.1";var n,s=Array.prototype,o=Object.prototype,r=Function.prototype;t.global=window,t.noop=function(){},t.typeOf=function(e){var t=typeof e,n=o.toString.call(e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof String)return"string";if(e instanceof Object)return t;if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},t.isDef=function(e){return void 0!==e},t.isNull=function(e){return null===e},t.isDefAndNotNull=function(e){return null!=e},t.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},t.isDateLike=function(e){return t.isObject(e)&&"function"==typeof e.getFullYear},t.isBoolean=function(e){return"boolean"==typeof e},t.isNumber=function(e){return"number"==typeof e},t.isNumberAndNotNaN=function(e){return"number"==typeof e&&e==e},t.isFunction=function(e){return"function"==t.typeOf(e)},t.isString=function(e){return"string"==t.typeOf(e)},t.isArray=function(e){return"array"==t.typeOf(e)},t.isArrayLike=function(e){var n=t.typeOf(e);return"array"==n||"object"==n&&"number"==typeof e.length},t.bindNative_=function(e){return e.call.apply(e.bind,arguments)},t.bindJs_=function(e,t){if(!e)throw new Error;if(arguments.length>2){var n=s.slice.call(arguments,2);return function(){var o=s.slice.call(arguments);return s.unshift.apply(o,n),e.apply(t,o)}}return function(){return e.apply(t,arguments)}},t.bind=function(){return t.bind=r.bind&&-1!=r.bind.toString().indexOf("native code")?t.bindNative_:t.bindJs_,t.bind.apply(null,arguments)},t.partial=function(e){var t=s.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},t.UID_PROPERTY_="uid_"+(1e9*Math.random()>>>0),t.uidCounter_=0,t.getUid=function(e){return e[t.UID_PROPERTY_]||(e[t.UID_PROPERTY_]=++t.uidCounter_)},t.hasUid=function(e){return!!e[t.UID_PROPERTY_]},t.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(t.UID_PROPERTY_);try{delete e[t.UID_PROPERTY_]}catch(n){}},t.cloneObject=function(e){var n=t.typeOf(e);if("object"==n||"array"==n){if(e.clone)return e.clone();var s="array"==n?[]:{};for(var o in e)s[o]=t.cloneObject(e[o]);return s}return e},t.mixin=function(e,t){for(var n in t)e[n]=t[n]},n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],t.extend=function(e){var t,s,r,i,a;for(t=1,r=arguments.length;r>t;t++){a=arguments[t];for(i in a)e[i]=a[i];for(s=0;s<n.length;s++)i=n[s],o.hasOwnProperty.call(a,i)&&(e[i]=a[i])}},t.now=Date.now||function(){return+new Date},t.globalEval=function(e){if(t.global.execScript)t.global.execScript(e,"JavaScript");else{if(!t.global.eval)throw Error("mace.globalEval not available");if(t.evalWorksForGlobals_)t.global.eval(e);else{var n=t.global.document,s=n.createElement("script");s.type="text/javascript",s.defer=!1,s.appendChild(n.createTextNode(e)),n.body.appendChild(s),n.body.removeChild(s)}}},t.evalWorksForGlobals_=function(){return t.global.eval?(t.global.eval("var _evtst_ = 1"),1===t.global._evtst_?(delete t.global._evtst_,!0):!1):null}(),t.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n){var s,o,r=[];for(s=2,o=arguments.length;o>s;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}},t.defineClass=function(e,n){var s=n.constructor,r=n.statics;s&&s!=o.constructor||(s=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var i=t.defineClass.createSealingConstructor_(s,e);return e&&t.inherits(i,e),delete n.constructor,delete n.statics,t.defineClass.applyProperties_(i.prototype,n),null!=r&&(r instanceof Function?r(i):t.defineClass.applyProperties_(i,r)),i},t.defineClass.SEAL_CLASS_INSTANCES=t.debug,t.defineClass.createSealingConstructor_=function(e,n){if(t.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(n&&n.prototype&&n.prototype[t.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var s=function(){var n=e.apply(this,arguments)||this;return n[t.UID_PROPERTY_]=n[t.UID_PROPERTY_],this.constructor===s&&Object.seal(n),n};return s}return e},t.defineClass.applyProperties_=function(e,t){var s,r,i;for(i in t)o.hasOwnProperty.call(t,i)&&(e[i]=t[i]);for(s=0,r=n.length;r>s;s++)i=n[s],o.hasOwnProperty.call(t,i)&&(e[i]=t[i])},t.tagUnsealableClass=function(e){t.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[t.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},t.UNSEALABLE_CONSTRUCTOR_PROPERTY_="defineClass_legacy_unsealable",t.Disposable=function(){t.Disposable.MONITORING_MODE!=t.Disposable.MonitoringMode.OFF&&(t.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=(new Error).stack),t.Disposable.instances_[t.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},t.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},t.Disposable.MONITORING_MODE=0,t.Disposable.INCLUDE_STACK_ON_CREATION=!0,t.Disposable.instances_={},t.Disposable.getUndisposedObjects=function(){var e=[];for(var n in t.Disposable.instances_)t.Disposable.instances_.hasOwnProperty(n)&&e.push(t.Disposable.instances_[Number(n)]);return e},t.Disposable.clearUndisposedObjects=function(){t.Disposable.instances_={}},t.Disposable.prototype.disposed_=!1,t.Disposable.prototype.onDisposeCallbacks_,t.Disposable.prototype.creationStack,t.Disposable.prototype.isDisposed=function(){return this.disposed_},t.Disposable.prototype.getDisposed=t.Disposable.prototype.isDisposed,t.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),t.Disposable.MONITORING_MODE!=t.Disposable.MonitoringMode.OFF)){var e=t.getUid(this);if(t.Disposable.MONITORING_MODE==t.Disposable.MonitoringMode.PERMANENT&&!t.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the mace.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete t.Disposable.instances_[e]}},t.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(t.partial(t.dispose,e))},t.Disposable.prototype.addOnDisposeCallback=function(e,n){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(t.isDef(n)?t.bind(e,n):e)},t.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},t.Disposable.isDisposed=function(e){return e&&"function"==typeof e.isDisposed?e.isDisposed():!1},t.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()},t.disposeAll=function(){for(var e=0,n=arguments.length;n>e;++e){var s=arguments[e];t.isArrayLike(s)?t.disposeAll.apply(null,s):t.dispose(s)}},t.Base=t.defineClass(t.Disposable,{constructor:function(){t.Base.base(this,"constructor")},destroy:function(){t.Base.base(this,"dispose")}}),t.makeClass=function(e,n){e=e||{};var s=e.parentClass||t.Base,o=e.constructor;return e.constructor=function(){s.apply(this,arguments),o&&o.apply(this,arguments)},e.statics=e.statics||n,e.parentClass&&delete e.parentClass,t.defineClass(s,e)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.mace=t):e.mace=t}).call(this);